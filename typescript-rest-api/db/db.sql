CREATE TABLE IF NOT EXISTS `machinetypes` (`id` INTEGER NOT NULL auto_increment , `name` VARCHAR(255) NOT NULL UNIQUE, `createdAt` DATETIME NOT NULL, `updatedAt` DATETIME NOT NULL, PRIMARY KEY (`id`)) ENGINE=InnoDB;
CREATE TABLE IF NOT EXISTS `machinemodels` (`id` INTEGER NOT NULL auto_increment , `name` VARCHAR(255) NOT NULL UNIQUE, `createdAt` DATETIME NOT NULL, `updatedAt` DATETIME NOT NULL, `machineTypeId` INTEGER, PRIMARY KEY (`id`), FOREIGN KEY (`machineTypeId`) REFERENCES `machinetypes` (`id`) ON DELETE SET NULL ON UPDATE CASCADE) ENGINE=InnoDB;
CREATE TABLE IF NOT EXISTS `machines` (`id` INTEGER NOT NULL auto_increment , `mac` VARCHAR(255) NOT NULL UNIQUE, `state` VARCHAR(255) NOT NULL, `createdAt` DATETIME NOT NULL, `updatedAt` DATETIME NOT NULL, `machineId` INTEGER, `machineModelId` INTEGER, PRIMARY KEY (`id`), FOREIGN KEY (`machineModelId`) REFERENCES `machinemodels` (`id`) ON DELETE SET NULL ON UPDATE CASCADE) ENGINE=InnoDB;
CREATE TABLE IF NOT EXISTS `connections` (`id` INTEGER NOT NULL auto_increment , `machineId` INTEGER NOT NULL , `connectedToMachineId` INTEGER NOT NULL , `startDate` DATETIME NOT NULL, `endDate` DATETIME, `createdAt` DATETIME NOT NULL, `updatedAt` DATETIME NOT NULL, PRIMARY KEY (`id`, `machineId`, `connectedToMachineId`), FOREIGN KEY (`machineId`) REFERENCES `machines` (`id`) ON DELETE CASCADE ON UPDATE CASCADE, FOREIGN KEY (`connectedToMachineId`) REFERENCES `machines` (`id`)) ENGINE=InnoDB;
CREATE TABLE IF NOT EXISTS `users` (`id` CHAR(36) BINARY NOT NULL , `email` VARCHAR(255) NOT NULL UNIQUE, `password` VARCHAR(255) NOT NULL, `createdAt` DATETIME NOT NULL, `updatedAt` DATETIME NOT NULL, PRIMARY KEY (`id`)) ENGINE=InnoDB;
INSERT INTO `machinetypes` (`id`,`name`,`createdAt`,`updatedAt`) VALUES (DEFAULT,'Chaudière','2023-02-19 22:34:34','2023-02-19 22:34:34');
INSERT INTO `machinetypes` (`id`,`name`,`createdAt`,`updatedAt`) VALUES (DEFAULT,'Box','2023-02-19 22:34:34','2023-02-19 22:34:34');
INSERT INTO `machinetypes` (`id`,`name`,`createdAt`,`updatedAt`) VALUES (DEFAULT,'Radiateur','2023-02-19 22:34:34','2023-02-19 22:34:34');
INSERT INTO `machinemodels` (`id`,`name`,`createdAt`,`updatedAt`,`machineTypeId`) VALUES (DEFAULT,'Radiateur 1700X','2023-02-19 22:34:34','2023-02-19 22:34:34',3);
INSERT INTO `machinemodels` (`id`,`name`,`createdAt`,`updatedAt`,`machineTypeId`) VALUES (DEFAULT,'Box OCP','2023-02-19 22:34:34','2023-02-19 22:34:34',1);
INSERT INTO `machinemodels` (`id`,`name`,`createdAt`,`updatedAt`,`machineTypeId`) VALUES (DEFAULT,'Chaudière OCP Leopard','2023-02-19 22:34:34','2023-02-19 22:34:34',2);
INSERT INTO `machinemodels` (`id`,`name`,`createdAt`,`updatedAt`,`machineTypeId`) VALUES (DEFAULT,'Chaudière OCP Capri','2023-02-19 22:34:34','2023-02-19 22:34:34',2);
INSERT INTO `machinemodels` (`id`,`name`,`createdAt`,`updatedAt`,`machineTypeId`) VALUES (DEFAULT,'Radiateur 2700','2023-02-19 22:34:34','2023-02-19 22:34:34',3);
INSERT INTO `machines` (`id`,`mac`,`state`,`createdAt`,`updatedAt`,`machineModelId`) VALUES (DEFAULT,'11:22:33:44:55:77','installed','2023-02-19 22:34:34','2023-02-19 22:34:34',2);
INSERT INTO `machines` (`id`,`mac`,`state`,`createdAt`,`updatedAt`,`machineModelId`) VALUES (DEFAULT,'11:22:33:44:55:66','installed','2023-02-19 22:34:34','2023-02-19 22:34:34',1);
INSERT INTO `machines` (`id`,`mac`,`state`,`createdAt`,`updatedAt`,`machineModelId`) VALUES (DEFAULT,'11:22:33:44:55:10','stock','2023-02-19 22:34:34','2023-02-19 22:34:34',5);
INSERT INTO `machines` (`id`,`mac`,`state`,`createdAt`,`updatedAt`,`machineModelId`) VALUES (DEFAULT,'11:22:33:44:55:88','installed','2023-02-19 22:34:34','2023-02-19 22:34:34',3);
INSERT INTO `machines` (`id`,`mac`,`state`,`createdAt`,`updatedAt`,`machineModelId`) VALUES (DEFAULT,'11:22:33:44:55:99','maintenance','2023-02-19 22:34:34','2023-02-19 22:34:34',4);
INSERT INTO `connections` (`id`,`machineId`,`connectedToMachineId`,`startDate`,`createdAt`,`updatedAt`) VALUES (DEFAULT,1,3,'2022-12-01 00:00:00','2023-02-19 22:34:34','2023-02-19 22:34:34');
INSERT INTO `connections` (`id`,`machineId`,`connectedToMachineId`,`startDate`,`createdAt`,`updatedAt`) VALUES (DEFAULT,1,2,'2022-09-01 00:00:00','2023-02-19 22:34:34','2023-02-19 22:34:34');
INSERT INTO `connections` (`id`,`machineId`,`connectedToMachineId`,`startDate`,`createdAt`,`updatedAt`) VALUES (DEFAULT,3,1,'2022-12-01 00:00:00','2023-02-19 22:34:34','2023-02-19 22:34:34');
INSERT INTO `connections` (`id`,`machineId`,`connectedToMachineId`,`startDate`,`endDate`,`createdAt`,`updatedAt`) VALUES (DEFAULT,1,4,'2022-09-01 00:00:00','2022-11-30 00:00:00','2023-02-19 22:34:34','2023-02-19 22:34:34');
INSERT INTO `connections` (`id`,`machineId`,`connectedToMachineId`,`startDate`,`endDate`,`createdAt`,`updatedAt`) VALUES (DEFAULT,4,1,'2022-09-01 00:00:00','2022-11-30 00:00:00','2023-02-19 22:34:34','2023-02-19 22:34:34');
INSERT INTO `connections` (`id`,`machineId`,`connectedToMachineId`,`startDate`,`createdAt`,`updatedAt`) VALUES (DEFAULT,2,1,'2022-09-01 00:00:00','2023-02-19 22:34:34','2023-02-19 22:34:34');